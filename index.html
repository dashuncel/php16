<!DOCTYPE html>
<html>
<head>
    <title>Поиск координаты</title>
    <link rel="stylesheet" href="index.css">
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js" type="text/javascript" ></script>
    <meta charset="utf-8">
</head>
<body>
    <form action="" method="POST" enctype="multipart/form-data" class="mainForm">
        <input type="text" name="address" required value="Москва ул.Мясницкая, 35">
        <input type="submit" name="send" value="Найти ->">
    </form>
    <section class="hide">
        <ul class="coordlist">

        </ul>
        <div id="map"></div>

    </section>
    <script>
        'use strict';
        $('input[type=submit]').click(function(event) {
            event.preventDefault();
            $.post("map.php",
                $('.mainForm').serialize(),
                function(data, result){
                    let coordinates = JSON.parse(data);
                    $('.coordlist').html('');
                    coordinates.forEach(function(item, i){
                        $('.coordlist').append(`<li><a href="#" data-latt="${item.latt}" data-long="${item.long}">${item.address} (широта: ${item.latt}, долгота ${item.long}</a></li>`);
                    });
                    $('section').show();
                }
            );
        });

        $('.coordlist').click(function(event) {
            if (event.target.tagName != "A") { return; }
            event.preventDefault();
            let map = new ymaps.Map("map", {
                center: [$(event.target).attr('data-latt'), $(event.target).attr('data-long')],
                zoom: 10
            });
        });


    </script>
</body>
</html>
